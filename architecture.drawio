<mxGraphModel dx="1422" dy="827" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
  <root>
    <mxCell id="0" />
    <mxCell id="1" parent="0" />
    
    <!-- Big Airflow Container (The Orchestrator) -->
    <mxCell id="airflow_master" value="&lt;font style=&quot;font-size: 18px&quot;&gt;&lt;b&gt;Apache Airflow Orchestration&lt;/b&gt;&lt;/font&gt;" style="swimlane;whiteSpace=wrap;html=1;startSize=50;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;collapsible=0;" vertex="1" parent="1">
      <mxGeometry x="40" y="40" width="1080" height="520" as="geometry" />
    </mxCell>

    <!-- Airflow Icon (Fixed URL) -->
    <mxCell id="airflow_icon" value="" style="image;aspect=fixed;perimeter=none;verticalLabelPosition=bottom;resizable=0;align=center;verticalAlign=top;image=https://raw.githubusercontent.com/apache/airflow/main/docs/apache-airflow/static/pin_large.png;" vertex="1" parent="airflow_master">
      <mxGeometry x="20" y="7" width="35" height="37" as="geometry" />
    </mxCell>

    <!-- Sub-Process: airflow-flight (Data Engineering) -->
    <mxCell id="de_process" value="&lt;b&gt;Data Engineering Pipeline (airflow-flight)&lt;/b&gt;" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontColor=#000000;collapsible=0;startSize=30;" vertex="1" parent="airflow_master">
      <mxGeometry x="30" y="70" width="480" height="420" as="geometry" />
    </mxCell>

    <!-- DE Steps -->
    <mxCell id="kaggle" value="&lt;b&gt;Kaggle API&lt;/b&gt;" style="image;aspect=fixed;perimeter=none;verticalLabelPosition=bottom;resizable=0;align=center;verticalAlign=top;image=https://www.vectorlogo.zone/logos/kaggle/kaggle-icon.svg;" vertex="1" parent="de_process">
      <mxGeometry x="30" y="60" width="60" height="60" as="geometry" />
    </mxCell>

    <mxCell id="mysql" value="&lt;b&gt;MySQL Staging&lt;/b&gt;" style="image;aspect=fixed;perimeter=none;verticalLabelPosition=bottom;resizable=0;align=center;verticalAlign=top;image=https://raw.githubusercontent.com/devicons/devicon/master/icons/mysql/mysql-original-wordmark.svg;" vertex="1" parent="de_process">
      <mxGeometry x="180" y="60" width="70" height="70" as="geometry" />
    </mxCell>

    <mxCell id="star_schema" value="&lt;b&gt;Star Schema&lt;/b&gt;&lt;br&gt;(SQL Transform)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="de_process">
      <mxGeometry x="340" y="55" width="100" height="80" as="geometry" />
    </mxCell>

    <mxCell id="postgres_dw" value="&lt;b&gt;Postgres DW&lt;/b&gt;&lt;br&gt;(Data Warehouse)" style="image;aspect=fixed;perimeter=none;verticalLabelPosition=bottom;resizable=0;align=center;verticalAlign=top;image=https://raw.githubusercontent.com/devicons/devicon/master/icons/postgresql/postgresql-original.svg;" vertex="1" parent="de_process">
      <mxGeometry x="185" y="240" width="60" height="64" as="geometry" />
    </mxCell>

    <mxCell id="kpi_dash" value="&lt;b&gt;KPI Dashboard&lt;/b&gt;&lt;br&gt;(Materialized Views)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="de_process">
      <mxGeometry x="330" y="320" width="120" height="60" as="geometry" />
    </mxCell>

    <!-- DE Flow Arrows -->
    <mxCell id="e_kaggle_mysql" value="Extract" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="de_process" source="kaggle" target="mysql">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e_mysql_star" value="Dedup" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryCx=0;entryCy=0;" edge="1" parent="de_process" source="mysql" target="star_schema">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e_star_postgres" value="Incremental Load" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="de_process" source="star_schema" target="postgres_dw">
      <mxGeometry relative="1" as="geometry">
        <Array as="points">
          <mxPoint x="390" y="272" />
        </Array>
      </mxGeometry>
    </mxCell>
    <mxCell id="e_postgres_kpi" value="Mat Views" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="de_process" source="postgres_dw" target="kpi_dash">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>

    <!-- Sub-Process: ML Training Pipeline -->
    <mxCell id="ml_process" value="&lt;b&gt;ML Pipeline (flight-fare-prediction)&lt;/b&gt;" style="swimlane;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontColor=#000000;collapsible=0;startSize=30;" vertex="1" parent="airflow_master">
      <mxGeometry x="560" y="70" width="480" height="420" as="geometry" />
    </mxCell>

    <!-- ML Steps -->
    <mxCell id="ml_clean" value="&lt;b&gt;Cleaning&lt;/b&gt;" style="image;aspect=fixed;perimeter=none;verticalLabelPosition=bottom;resizable=0;align=center;verticalAlign=top;image=https://raw.githubusercontent.com/devicons/devicon/master/icons/python/python-original.svg;" vertex="1" parent="ml_process">
      <mxGeometry x="40" y="60" width="60" height="60" as="geometry" />
    </mxCell>

    <mxCell id="ml_eng" value="&lt;b&gt;Feature Eng&lt;/b&gt;" style="image;aspect=fixed;perimeter=none;verticalLabelPosition=bottom;resizable=0;align=center;verticalAlign=top;image=https://raw.githubusercontent.com/devicons/devicon/master/icons/python/python-original.svg;" vertex="1" parent="ml_process">
      <mxGeometry x="180" y="60" width="60" height="60" as="geometry" />
    </mxCell>

    <mxCell id="ml_train" value="&lt;b&gt;GridSearch CV&lt;/b&gt;&lt;br&gt;Hyper-tuning" style="image;aspect=fixed;perimeter=none;verticalLabelPosition=bottom;resizable=0;align=center;verticalAlign=top;image=https://raw.githubusercontent.com/devicons/devicon/master/icons/python/python-original.svg;" vertex="1" parent="ml_process">
      <mxGeometry x="340" y="60" width="60" height="60" as="geometry" />
    </mxCell>

    <mxCell id="model_file" value="&lt;b&gt;Best Model&lt;/b&gt;&lt;br&gt;(PKL)" style="shape=document;whiteSpace=wrap;html=1;boundedLbl=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="ml_process">
      <mxGeometry x="175" y="240" width="80" height="100" as="geometry" />
    </mxCell>

    <!-- ML Flow Arrows -->
    <mxCell id="ml_e1" value="Fix Leakage" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="ml_process" source="ml_clean" target="ml_eng">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="ml_e2" value="Transform" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="ml_process" source="ml_eng" target="ml_train">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="ml_e3" value="Save" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="ml_process" source="ml_train" target="model_file">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>

    <!-- Inter-Process Data Flow -->
    <mxCell id="data_flow_link" value="&lt;b&gt;ML Features Source&lt;/b&gt;" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=3;strokeColor=#FF0000;fontStyle=1" edge="1" parent="airflow_master" source="postgres_dw" target="ml_clean">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>

    <!-- External Serving (Outside Airflow) -->
    <mxCell id="fastapi" value="&lt;b&gt;FastAPI &amp; Docker&lt;/b&gt;" style="image;aspect=fixed;perimeter=none;verticalLabelPosition=bottom;resizable=0;align=center;verticalAlign=top;image=https://raw.githubusercontent.com/devicons/devicon/master/icons/fastapi/fastapi-original.svg;" vertex="1" parent="1">
      <mxGeometry x="600" y="640" width="80" height="80" as="geometry" />
    </mxCell>

    <mxCell id="streamlit" value="&lt;b&gt;Streamlit UI&lt;/b&gt;" style="image;aspect=fixed;perimeter=none;verticalLabelPosition=bottom;resizable=0;align=center;verticalAlign=top;image=https://streamlit.io/images/brand/streamlit-mark-color.svg;" vertex="1" parent="1">
      <mxGeometry x="840" y="640" width="80" height="80" as="geometry" />
    </mxCell>

    <mxCell id="serve_link" value="Predict" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="model_file" target="fastapi">
      <mxGeometry relative="1" as="geometry">
        <Array as="points">
          <mxPoint x="275" y="680" />
        </Array>
      </mxGeometry>
    </mxCell>

    <mxCell id="api_ui_link" value="Consume" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="fastapi" target="streamlit">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>

  </root>
</mxGraphModel>
